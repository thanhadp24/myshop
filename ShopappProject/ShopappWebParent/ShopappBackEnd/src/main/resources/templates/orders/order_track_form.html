<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
	
<div th:fragment="content">
	<div id="trackList">
		<th:block th:each="track, status: ${order.orderTracks}">
		<div class="row border rounded p-2" th:id="'rowTrack' + ${status.count}"
			th:with="isTrackWithStatusNew=${track.status.toString() == 'NEW'}">
			
			<input type="hidden" name="trackId" th:value="${track.id}" class="hiddenTrackId">
			
			<div class="col-2">
				<div class="divCountTrack">[[${status.count}]]</div>
				<th:block th:unless="${isTrackWithStatusNew}">
				<div class="mt-1">
					<a class="fa-solid fa-trash text-dark linkRemoveTrack"
						href="" th:rowNumber=${status.count}></a>
				</div>
				</th:block>
			</div>
			
			<div class="col-10">
				<div class="form-group row">
					<label class="col-form-label">Time:</label>
					<div class="col">
						<input type="datetime-local" name="trackDate" 
						th:value="${track.updatedTimeOnForm}" class="form-control"
						th:readonly="${isTrackWithStatusNew}" style="max-width: 300px"
						th:required="${!isTrackWithStatusNew}">
					</div>
				</div>
				<div class="form-group row">
					<label class="col-form-label">Status:</label>
					<div class="col">
						<th:block th:if="${isTrackWithStatusNew}">
							<input type="hidden" name="trackStatus" value="NEW">
						</th:block>
						<select name="trackStatus" class="form-control dropdownStatus"
							required style="max-width: 150px" th:rowNumber="${status.count}"
							th:disabled="${isTrackWithStatusNew}"
							th:id="${isTrackWithStatusNew ?  'trackStatusOption':''}">
							<th:block th:each="os: ${T(com.shopapp.common.enumm.OrderStatus).values()}">
								<option th:value="${os}" th:text="${os}" th:selected="${os == track.status}"
									th:defaultDescription="${os.defaultDescription}">
								</option>
							</th:block>
						</select>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-form-label">Notes:</label>
					<div class="col">
						<textarea rows="2" cols="10" class="form-control" name="trackNote"
							style="max-width: 300px" th:id="'trackNote'+${status.count}"
							th:readonly="${isTrackWithStatusNew}" required>
							[[${track.notes}]]
							</textarea>
					</div>
				</div>
			</div>
		</div>
	
		<div th:id="'lineTrackBlank' + ${status.count}" class="row">&nbsp;</div>
		</th:block>
	</div>
	
	<a class="btn btn-success" id="linkAddTrack" href="">Add track Record</a>
</div>

</body>
</html>